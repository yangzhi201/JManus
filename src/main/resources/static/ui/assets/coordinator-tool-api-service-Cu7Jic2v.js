class c{static BASE_URL="/api/coordinator-tools";static async getAllCoordinatorTools(){try{const o=await fetch(`${this.BASE_URL}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!o.ok)throw new Error(`Failed to get coordinator tools: ${o.status}`);return await o.json()||[]}catch(o){console.error("Failed to get coordinator tools:",o);const e=o instanceof Error?o.message:"Unknown error";throw new Error("Failed to get coordinator tools: "+e)}}static async getCoordinatorToolConfig(){try{const o=await fetch(`${this.BASE_URL}/config`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!o.ok)throw new Error(`Failed to get coordinator tool config: ${o.status}`);return await o.json()}catch(o){return console.error("Failed to get CoordinatorTool configuration:",o),{enabled:!0,success:!1,message:o instanceof Error?o.message:"Unknown error"}}}static async getAllEndpoints(){try{const o=await fetch(`${this.BASE_URL}/endpoints`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!o.ok)throw new Error(`Failed to get endpoints: ${o.status}`);return await o.json()}catch(o){console.error("Failed to get endpoints:",o);const e=o instanceof Error?o.message:"Unknown error";throw new Error("Failed to get endpoints: "+e)}}static async getCoordinatorToolByTemplate(o){console.log("[CoordinatorToolApiService] Getting coordinator tool, planTemplateId:",o),console.log("[CoordinatorToolApiService] Request URL:",`${this.BASE_URL}/by-template/${o}`);try{const e=await fetch(`${this.BASE_URL}/by-template/${o}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(console.log("[CoordinatorToolApiService] Response status:",e.status),!e.ok){const n=await e.text();throw console.error("[CoordinatorToolApiService] Response error content:",n),new Error(`Failed to get coordinator tool: ${e.status} - ${n}`)}const r=await e.text();if(!r||r.trim()==="")return console.log("[CoordinatorToolApiService] Tool not found for planTemplateId (empty response):",o),null;let t;try{t=JSON.parse(r)}catch(n){return console.error("[CoordinatorToolApiService] Failed to parse JSON response:",n),null}return t===null||typeof t=="object"&&Object.keys(t).length===0?(console.log("[CoordinatorToolApiService] Tool not found for planTemplateId:",o),null):(console.log("[CoordinatorToolApiService] Successfully got coordinator tool:",t),t)}catch(e){console.error("[CoordinatorToolApiService] Failed to get coordinator tool:",e);const r=e instanceof Error?e.message:"Unknown error";throw new Error("Failed to get coordinator tool: "+r)}}static createDefaultCoordinatorTool(o,e,r){return{toolName:e?`tool_${e}`:"",toolDescription:r??"",planTemplateId:o,inputSchema:"[]",serviceGroup:"",enableInternalToolcall:!1,enableHttpService:!1,enableMcpService:!1}}static async createCoordinatorTool(o){console.log("[CoordinatorToolApiService] Starting to create coordinator tool"),console.log("[CoordinatorToolApiService] Original data:",JSON.stringify(o,null,2)),console.log("[CoordinatorToolApiService] Request URL:",`${this.BASE_URL}`);const e={id:o.id,toolName:o.toolName,toolDescription:o.toolDescription,inputSchema:o.inputSchema,planTemplateId:o.planTemplateId,httpEndpoint:o.httpEndpoint,mcpEndpoint:o.mcpEndpoint,serviceGroup:o.serviceGroup,enableInternalToolcall:o.enableInternalToolcall,enableHttpService:o.enableHttpService,enableMcpService:o.enableMcpService};console.log("[CoordinatorToolApiService] Cleaned sending data:",JSON.stringify(e,null,2));try{const r=await fetch(`${this.BASE_URL}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log("[CoordinatorToolApiService] Response status:",r.status),console.log("[CoordinatorToolApiService] Response status text:",r.statusText),!r.ok){let n="Unknown error";try{const a=await r.json();n=a.message||a.error||n}catch{n=await r.text()||n}throw console.error("[CoordinatorToolApiService] Response error content:",n),new Error(`Failed to create coordinator tool: ${r.status} - ${n}`)}const t=await r.json();return console.log("[CoordinatorToolApiService] Created successfully, result:",t),t}catch(r){console.error("[CoordinatorToolApiService] Failed to create coordinator tool:",r);const t=r instanceof Error?r.message:"Unknown error";throw new Error("Failed to create coordinator tool: "+t)}}static async updateCoordinatorTool(o,e){console.log("[CoordinatorToolApiService] Starting to update coordinator tool, ID:",o),console.log("[CoordinatorToolApiService] Sending data:",e),console.log("[CoordinatorToolApiService] Request URL:",`${this.BASE_URL}/${o}`);const r={id:e.id,toolName:e.toolName,toolDescription:e.toolDescription,inputSchema:e.inputSchema,planTemplateId:e.planTemplateId,httpEndpoint:e.httpEndpoint,mcpEndpoint:e.mcpEndpoint,serviceGroup:e.serviceGroup,enableInternalToolcall:e.enableInternalToolcall,enableHttpService:e.enableHttpService,enableMcpService:e.enableMcpService};console.log("[CoordinatorToolApiService] Cleaned sending data:",r);try{const t=await fetch(`${this.BASE_URL}/${o}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(console.log("[CoordinatorToolApiService] Response status:",t.status),console.log("[CoordinatorToolApiService] Response status text:",t.statusText),!t.ok){let a="Unknown error";try{const s=await t.json();a=s.message||s.error||a}catch{a=await t.text()||a}throw console.error("[CoordinatorToolApiService] Response error content:",a),new Error(`Failed to update coordinator tool: ${t.status} - ${a}`)}const n=await t.json();return console.log("[CoordinatorToolApiService] Updated successfully, result:",n),n}catch(t){console.error("[CoordinatorToolApiService] Failed to update coordinator tool:",t);const n=t instanceof Error?t.message:"Unknown error";throw new Error("Failed to update coordinator tool: "+n)}}static async deleteCoordinatorTool(o){console.log("[CoordinatorToolApiService] Starting to delete coordinator tool, ID:",o),console.log("[CoordinatorToolApiService] Request URL:",`${this.BASE_URL}/${o}`);try{const e=await fetch(`${this.BASE_URL}/${o}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(console.log("[CoordinatorToolApiService] Response status:",e.status),console.log("[CoordinatorToolApiService] Response status text:",e.statusText),!e.ok){const t=await e.text();throw console.error("[CoordinatorToolApiService] Response error content:",t),new Error(`Failed to delete coordinator tool: ${e.status} - ${t}`)}const r=await e.json();return console.log("[CoordinatorToolApiService] Deleted successfully, result:",r),r}catch(e){console.error("[CoordinatorToolApiService] Failed to delete coordinator tool:",e);const r=e instanceof Error?e.message:"Unknown error";throw new Error("Failed to delete coordinator tool: "+r)}}}export{c as CoordinatorToolApiService};
//# sourceMappingURL=coordinator-tool-api-service-Cu7Jic2v.js.map
