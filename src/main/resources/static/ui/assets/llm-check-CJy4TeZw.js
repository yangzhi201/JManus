class c{static cachedStatus=null;static CACHE_DURATION=3e4;static async checkLlmConfiguration(){const e=Date.now();if(this.cachedStatus&&e-this.cachedStatus.lastCheck<this.CACHE_DURATION)return{initialized:this.cachedStatus.initialized};try{const t=await fetch("/api/init/status");if(!t.ok)throw new Error(`Check failed: ${t.status}`);const a=await t.json(),i=a.success&&a.initialized;return this.cachedStatus={initialized:i,lastCheck:e},i?{initialized:!0}:{initialized:!1,message:"System has not configured LLM model yet, please configure API key through initialization page first."}}catch(t){return console.error("[LlmCheckService] Failed to check LLM configuration:",t),{initialized:!1,message:"Unable to check LLM configuration status, please ensure system is running normally."}}}static async ensureLlmConfigured(e){const{showAlert:t=!0,redirectToInit:a=!0}=e??{},i=await this.checkLlmConfiguration();if(!i.initialized){const s=i.message??"Please configure LLM model first";throw t&&alert(s),a?(localStorage.removeItem("hasInitialized"),window.location.href="/ui/#/init",new Error("Redirecting to initialization page")):new Error(s)}}static clearCache(){this.cachedStatus=null}static async withLlmCheck(e,t){return await this.ensureLlmConfigured(t),e()}}export{c as L};
//# sourceMappingURL=llm-check-CJy4TeZw.js.map
