{"version":3,"file":"LanguageSwitcher-40OP30r_.js","sources":["../../src/components/language-switcher/LanguageSwitcher.vue"],"sourcesContent":["<!--\n * Copyright 2025 the original author or authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n-->\n<template>\n  <div class=\"language-switcher\">\n    <button\n      class=\"language-btn\"\n      @click=\"toggleDropdown\"\n      :title=\"$t('language.switch')\"\n    >\n      <Icon icon=\"carbon:translate\" width=\"18\" />\n      <span class=\"current-lang\">{{ currentLanguageLabel }}</span>\n      <Icon :icon=\"showDropdown ? 'carbon:chevron-up' : 'carbon:chevron-down'\" width=\"14\" class=\"chevron\" />\n    </button>\n\n    <div v-if=\"showDropdown\" class=\"language-dropdown\" @click.stop>\n      <div class=\"dropdown-header\">\n        <span>{{ $t('language.switch') }}</span>\n        <button class=\"close-btn\" @click=\"showDropdown = false\">\n          <Icon icon=\"carbon:close\" width=\"16\" />\n        </button>\n      </div>\n      <div class=\"language-options\">\n        <button\n          v-for=\"option in languageOptions\"\n          :key=\"option.value\"\n          class=\"language-option\"\n          :class=\"{\n            active: currentLocale === option.value,\n            loading: isChangingLanguage && currentLocale !== option.value\n          }\"\n          :disabled=\"isChangingLanguage\"\n          @click=\"selectLanguage(option.value)\"\n        >\n          <span class=\"lang-code\">{{ option.value.toUpperCase() }}</span>\n          <span class=\"lang-name\">{{ option.title }}</span>\n          <Icon\n            v-if=\"isChangingLanguage && currentLocale !== option.value\"\n            icon=\"carbon:circle-dash\"\n            width=\"16\"\n            class=\"loading-icon\"\n          />\n          <Icon\n            v-else-if=\"currentLocale === option.value\"\n            icon=\"carbon:checkmark\"\n            width=\"16\"\n            class=\"check-icon\"\n          />\n        </button>\n      </div>\n    </div>\n\n    <!-- Backdrop -->\n    <div\n      v-if=\"showDropdown\"\n      class=\"backdrop\"\n      @click=\"showDropdown = false\"\n    ></div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, onMounted, onUnmounted } from 'vue'\nimport { useI18n } from 'vue-i18n'\nimport { Icon } from '@iconify/vue'\nimport { localeConfig, changeLanguage } from '@/base/i18n'\n\nconst { locale } = useI18n()\n\nconst showDropdown = ref(false)\n\nconst currentLocale = computed(() => locale.value)\n\nconst languageOptions = computed(() => localeConfig.opts)\n\nconst currentLanguageLabel = computed(() => {\n  const current = languageOptions.value.find(opt => opt.value === currentLocale.value)\n  return current ? current.title : 'Unknown'\n})\n\nconst toggleDropdown = () => {\n  showDropdown.value = !showDropdown.value\n}\n\nconst isChangingLanguage = ref(false)\n\nconst selectLanguage = async (lang: string) => {\n  if (isChangingLanguage.value || currentLocale.value === lang) return\n\n  try {\n    isChangingLanguage.value = true\n    await changeLanguage(lang)\n    showDropdown.value = false\n  } catch (error) {\n    console.error('Failed to change language:', error)\n    // Close dropdown even if failed\n    showDropdown.value = false\n  } finally {\n    isChangingLanguage.value = false\n  }\n}\n\n// Close dropdown when clicking outside\nconst handleClickOutside = (event: MouseEvent) => {\n  const target = event.target as HTMLElement\n  if (!target.closest('.language-switcher')) {\n    showDropdown.value = false\n  }\n}\n\n// Close dropdown on escape key\nconst handleKeydown = (event: KeyboardEvent) => {\n  if (event.key === 'Escape') {\n    showDropdown.value = false\n  }\n}\n\nonMounted(() => {\n  document.addEventListener('click', handleClickOutside)\n  document.addEventListener('keydown', handleKeydown)\n})\n\nonUnmounted(() => {\n  document.removeEventListener('click', handleClickOutside)\n  document.removeEventListener('keydown', handleKeydown)\n})\n</script>\n\n<style scoped>\n.language-switcher {\n  position: relative;\n  display: inline-block;\n}\n\n.language-btn {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 8px 12px;\n  background: transparent;\n  border: 1.5px solid #667eea;\n  border-radius: 8px;\n  color: #8da2fb;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 14px;\n  font-weight: 600;\n  outline: none;\n}\n\n.language-btn:hover {\n  background: rgba(102, 126, 234, 0.15);\n  border-color: #7c9eff;\n  color: #a3bffa;\n  box-shadow: 0 0 15px rgba(102, 126, 234, 0.2);\n}\n\n.language-btn:focus {\n  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.5);\n}\n\n.current-lang {\n  color: inherit;\n  font-weight: 600;\n  min-width: 40px;\n  text-align: left;\n  text-shadow: none;\n}\n\n.chevron {\n  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  opacity: 0.9;\n  filter: none;\n}\n\n.language-dropdown {\n  position: absolute;\n  top: 100%;\n  right: 0;\n  z-index: 9999;\n  margin-top: 4px;\n  background: linear-gradient(135deg, rgba(40, 40, 50, 0.95), rgba(30, 30, 40, 0.95));\n  backdrop-filter: blur(16px);\n  border: 1px solid rgba(102, 126, 234, 0.3);\n  border-radius: 8px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(102, 126, 234, 0.2);\n  min-width: 200px;\n  animation: slideDown 0.2s ease;\n}\n\n.dropdown-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 12px 16px;\n  border-bottom: 1px solid rgba(102, 126, 234, 0.2);\n  font-size: 14px;\n  font-weight: 600;\n  color: #ffffff;\n  background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(102, 126, 234, 0.05));\n}\n\n.close-btn {\n  background: none;\n  border: none;\n  color: rgba(255, 255, 255, 0.6);\n  cursor: pointer;\n  padding: 4px;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n}\n\n.close-btn:hover {\n  background: rgba(255, 255, 255, 0.1);\n  color: rgba(255, 255, 255, 0.8);\n}\n\n.language-options {\n  padding: 8px 0;\n}\n\n.language-option {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  width: 100%;\n  padding: 10px 16px;\n  background: none;\n  border: none;\n  color: rgba(255, 255, 255, 0.7);\n  cursor: pointer;\n  transition: all 0.2s ease;\n  text-align: left;\n}\n\n.language-option:hover {\n  background: rgba(255, 255, 255, 0.05);\n  color: rgba(255, 255, 255, 0.9);\n}\n\n.language-option.active {\n  background: linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(102, 126, 234, 0.1));\n  color: #7c9eff;\n  border-left: 3px solid #667eea;\n  padding-left: 13px;\n}\n\n.language-option.loading {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.language-option:disabled {\n  cursor: not-allowed;\n  opacity: 0.6;\n}\n\n.lang-code {\n  display: inline-block;\n  min-width: 24px;\n  font-size: 12px;\n  font-weight: 600;\n  text-transform: uppercase;\n  opacity: 0.8;\n}\n\n.lang-name {\n  flex: 1;\n  font-size: 14px;\n  font-weight: 500;\n}\n\n.check-icon {\n  color: #667eea;\n  opacity: 0.8;\n}\n\n.loading-icon {\n  color: #667eea;\n  opacity: 0.8;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n.backdrop {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 9998;\n  background: transparent;\n}\n\n@keyframes slideDown {\n  from {\n    opacity: 0;\n    transform: translateY(-8px) scale(0.95);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n}\n\n/* Responsive design */\n@media (max-width: 768px) {\n  .language-dropdown {\n    right: -8px;\n    left: -8px;\n    width: auto;\n    min-width: auto;\n  }\n\n  .language-btn {\n    padding: 6px 10px;\n    font-size: 13px;\n  }\n\n  .current-lang {\n    min-width: 35px;\n  }\n}\n\n/* Dark theme adjustments */\n@media (prefers-color-scheme: light) {\n  .language-dropdown {\n    background: rgba(255, 255, 255, 0.95);\n    border-color: rgba(0, 0, 0, 0.1);\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n  }\n\n  .dropdown-header {\n    color: rgba(0, 0, 0, 0.8);\n    border-bottom-color: rgba(0, 0, 0, 0.1);\n  }\n\n  .close-btn {\n    color: rgba(0, 0, 0, 0.6);\n  }\n\n  .close-btn:hover {\n    background: rgba(0, 0, 0, 0.1);\n    color: rgba(0, 0, 0, 0.8);\n  }\n\n  .language-option {\n    color: rgba(0, 0, 0, 0.7);\n  }\n\n  .language-option:hover {\n    background: rgba(0, 0, 0, 0.05);\n    color: rgba(0, 0, 0, 0.9);\n  }\n}\n</style>\n"],"names":["locale","useI18n","showDropdown","ref","currentLocale","computed","languageOptions","localeConfig","currentLanguageLabel","current","opt","toggleDropdown","isChangingLanguage","selectLanguage","lang","changeLanguage","error","handleClickOutside","event","handleKeydown","onMounted","onUnmounted","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","$t","_createVNode","_unref","Icon","_hoisted_3","_toDisplayString","_hoisted_4","_hoisted_5","_Fragment","_renderList","option","$event","_hoisted_7","_hoisted_8","_createBlock"],"mappings":"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"}