import{d as A,o as Z,I as ee,l as x,b as p,K as N,g as k,T as j,p as D,a as f,f as V,e as t,t as i,n as I,i as S,S as z,j as M,c as B,r as b,C as G,w as F,m as oe,G as te,F as L,q as U,A as se,h as le,X as ae,B as ne}from"./index-B41i2gpg.js";import{I as w,_ as E}from"./_plugin-vue_export-helper-ivSPPR41.js";const ce={class:"modal-header"},ie={class:"header-content"},re=["title"],de={class:"modal-content"},ue={class:"modal-footer"},pe=A({__name:"index",props:{modelValue:{type:Boolean,required:!0},title:{type:String,default:""},statusIcon:{type:String,default:""},statusIconClass:{type:String,default:""},statusIconTitle:{type:String,default:""}},emits:["update:modelValue","confirm"],setup(n,{emit:v}){const r=n,h=v,m=c=>{c.target===c.currentTarget&&(c.stopPropagation(),c.preventDefault())},y=c=>{c.key==="Escape"&&r.modelValue&&h("update:modelValue",!1)};return Z(()=>{document.addEventListener("keydown",y)}),ee(()=>{document.removeEventListener("keydown",y)}),(c,s)=>(p(),x(N,{to:"body"},[k(j,{name:"modal"},{default:D(()=>[n.modelValue?(p(),f("div",{key:0,class:"modal-overlay",onClick:m},[t("div",{class:"modal-container",onClick:s[3]||(s[3]=M(()=>{},["stop"]))},[t("div",ce,[t("div",ie,[t("h3",null,i(n.title),1),n.statusIcon?(p(),f("div",{key:0,class:I(["status-icon",n.statusIconClass]),title:n.statusIconTitle},[k(S(w),{icon:n.statusIcon,width:"16"},null,8,["icon"])],10,re)):V("",!0)]),t("button",{class:"close-btn",onClick:s[0]||(s[0]=l=>c.$emit("update:modelValue",!1))},[k(S(w),{icon:"carbon:close"})])]),t("div",de,[z(c.$slots,"default",{},void 0,!0)]),t("div",ue,[z(c.$slots,"footer",{},()=>[t("button",{class:"cancel-btn",onClick:s[1]||(s[1]=l=>c.$emit("update:modelValue",!1))},i(c.$t("common.cancel")),1),t("button",{class:"confirm-btn",onClick:s[2]||(s[2]=l=>c.$emit("confirm"))},i(c.$t("common.confirm")),1)],!0)])])])):V("",!0)]),_:3})]))}}),me=E(pe,[["__scopeId","data-v-ece0ef1e"]]),ve={class:"tool-selection-content"},he={class:"tool-controls"},fe={class:"search-container"},ge=["placeholder"],ye={class:"sort-container"},ke={value:"group"},_e={value:"name"},be={value:"enabled"},Te={class:"tool-summary"},Ce={class:"summary-text"},$e={key:0,class:"tool-groups"},Se=["onClick"],we={class:"group-title-area"},Ve={class:"group-name"},Be={class:"group-count"},Ie={class:"group-enable-all"},Ge=["checked","onChange","data-group"],Me={class:"enable-label"},Ae={class:"tool-info"},Ee={class:"tool-selection-name"},Le={key:0,class:"tool-selection-desc"},Ue={class:"tool-actions"},xe=["checked","onChange"],De={key:1,class:"empty-state"},Pe=A({__name:"ToolSelectionModal",props:{modelValue:{type:Boolean},tools:{},selectedToolIds:{}},emits:["update:modelValue","confirm"],setup(n,{emit:v}){const r=n,h=v,m=B({get:()=>r.modelValue,set:e=>h("update:modelValue",e)}),y=b(""),c=b("group"),s=b(new Set),l=b([]),g=(e,o)=>{const a=document.querySelector(`input[data-group="${e}"]`);a&&(a.indeterminate=X(o))};G(()=>r.selectedToolIds,e=>{l.value=[...e]},{immediate:!0});const T=B(()=>{let e=r.tools.filter(o=>o.key);if(e=e.filter(o=>o.selectable===!0),y.value){const o=y.value.toLowerCase();e=e.filter(a=>{var u;return a.name.toLowerCase().includes(o)||a.description.toLowerCase().includes(o)||(((u=a.serviceGroup)==null?void 0:u.toLowerCase().includes(o))??!1)})}switch(c.value){case"name":e=[...e].sort((o,a)=>o.name.localeCompare(a.name));break;case"enabled":e=[...e].sort((o,a)=>{const u=l.value.includes(o.key),d=l.value.includes(a.key);return u&&!d?-1:!u&&d?1:o.name.localeCompare(a.name)});break;case"group":default:e=[...e].sort((o,a)=>{const u=o.serviceGroup??"Ungrouped",d=a.serviceGroup??"Ungrouped";return u!==d?u.localeCompare(d):o.name.localeCompare(a.name)});break}return e}),C=B(()=>{const e=new Map;return T.value.forEach(o=>{const a=o.serviceGroup??"Ungrouped";e.has(a)||e.set(a,[]),e.get(a).push(o)}),new Map([...e.entries()].sort())}),K=B(()=>T.value.length);G([l,C],()=>{se(()=>{for(const[e,o]of C.value)g(e,o)})},{flush:"post",deep:!1});const O=e=>l.value.includes(e),Q=(e,o)=>{o.stopPropagation();const u=o.target.checked;if(!e){console.error("toolKey is undefined, cannot proceed");return}u?l.value.includes(e)||(l.value=[...l.value,e]):l.value=l.value.filter(d=>d!==e)},P=e=>e.filter(o=>l.value.includes(o.key)),R=e=>e.length>0&&e.every(o=>l.value.includes(o.key)),X=e=>{const o=P(e).length;return o>0&&o<e.length},H=(e,o)=>{o.stopPropagation();const u=o.target.checked,d=e.map(_=>_.key);if(u){const _=[...l.value];d.forEach(q=>{_.includes(q)||_.push(q)}),l.value=_}else l.value=l.value.filter(_=>!d.includes(_))},J=e=>{s.value.has(e)?s.value.delete(e):s.value.add(e)},W=()=>{h("confirm",[...l.value]),h("update:modelValue",!1)},Y=()=>{l.value=[...r.selectedToolIds],h("update:modelValue",!1)};return G(m,e=>{if(e){s.value.clear();const o=Array.from(C.value.keys());o.length>1&&o.slice(1).forEach(a=>{s.value.add(a)})}}),(e,o)=>(p(),x(me,{modelValue:m.value,"onUpdate:modelValue":[o[4]||(o[4]=a=>m.value=a),Y],title:e.$t("toolSelection.title"),onConfirm:W},{default:D(()=>[t("div",ve,[t("div",he,[t("div",fe,[F(t("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>y.value=a),type:"text",class:"search-input",placeholder:e.$t("toolSelection.searchPlaceholder")},null,8,ge),[[oe,y.value]])]),t("div",ye,[F(t("select",{"onUpdate:modelValue":o[1]||(o[1]=a=>c.value=a),class:"sort-select"},[t("option",ke,i(e.$t("toolSelection.sortByGroup")),1),t("option",_e,i(e.$t("toolSelection.sortByName")),1),t("option",be,i(e.$t("toolSelection.sortByStatus")),1)],512),[[te,c.value]])])]),t("div",Te,[t("span",Ce,i(e.$t("toolSelection.summary",{groups:C.value.size,tools:K.value,selected:l.value.length})),1)]),C.value.size>0?(p(),f("div",$e,[(p(!0),f(L,null,U(C.value,([a,u])=>(p(),f("div",{key:a,class:"tool-group"},[t("div",{class:I(["tool-group-header",{collapsed:s.value.has(a)}]),onClick:d=>J(a)},[t("div",we,[k(S(w),{icon:s.value.has(a)?"carbon:chevron-right":"carbon:chevron-down",class:"collapse-icon"},null,8,["icon"]),k(S(w),{icon:"carbon:folder",class:"group-icon"}),t("span",Ve,i(a),1),t("span",Be," ("+i(P(u).length)+"/"+i(u.length)+") ",1)]),t("div",{class:"group-actions",onClick:o[2]||(o[2]=M(()=>{},["stop"]))},[t("label",Ie,[t("input",{type:"checkbox",class:"group-enable-checkbox",checked:R(u),onChange:d=>H(u,d),"data-group":a},null,40,Ge),t("span",Me,i(e.$t("toolSelection.enableAll")),1)])])],10,Se),t("div",{class:I(["tool-group-content",{collapsed:s.value.has(a)}])},[(p(!0),f(L,null,U(u,d=>(p(),f("div",{key:d.key,class:"tool-selection-item"},[t("div",Ae,[t("div",Ee,i(d.name),1),d.description?(p(),f("div",Le,i(d.description),1)):V("",!0)]),t("div",Ue,[t("label",{class:"tool-enable-switch",onClick:o[3]||(o[3]=M(()=>{},["stop"]))},[t("input",{type:"checkbox",class:"tool-enable-checkbox",checked:O(d.key),onChange:_=>Q(d.key,_)},null,40,xe),o[5]||(o[5]=t("span",{class:"tool-enable-slider"},null,-1))])])]))),128))],2)]))),128))])):(p(),f("div",De,[k(S(w),{icon:"carbon:tools",class:"empty-icon"}),t("p",null,i(e.$t("toolSelection.noToolsFound")),1)]))])]),_:1},8,["modelValue","title"]))}}),Ze=E(Pe,[["__scopeId","data-v-96799074"]]),qe={class:"assigned-tools"},ze={class:"section-header"},Fe={class:"tool-info"},Ne={class:"tool-name"},je={class:"tool-desc"},Ke={key:0,class:"no-tools"},Oe=A({__name:"AssignedTools",props:{title:{},selectedToolIds:{},availableTools:{},addButtonText:{default:"Add/Remove Tools"},emptyText:{default:"No tools assigned"},showAddButton:{type:Boolean,default:!0},useGridLayout:{type:Boolean,default:!1}},emits:["add-tools","tools-filtered"],setup(n,{emit:v}){const r=n,h=v,m=B(()=>r.selectedToolIds.filter(s=>r.availableTools.some(l=>l.key===s)));G(m,s=>{s.length!==r.selectedToolIds.length&&h("tools-filtered",s)},{immediate:!0});const y=s=>{const l=r.availableTools.find(g=>g.key===s);return l?l.name:s},c=s=>{const l=r.availableTools.find(g=>g.key===s);return l?l.description:""};return(s,l)=>(p(),f("div",qe,[t("div",ze,[t("span",null,i(s.title)+" ("+i(m.value.length)+")",1),s.showAddButton?(p(),f("button",{key:0,class:"action-btn small",onClick:l[0]||(l[0]=g=>s.$emit("add-tools"))},[k(S(w),{icon:"carbon:add"}),le(" "+i(s.addButtonText),1)])):V("",!0)]),t("div",{class:I(["tools-grid",{"grid-layout":s.useGridLayout}])},[(p(!0),f(L,null,U(m.value,g=>(p(),f("div",{key:g,class:"tool-item assigned"},[t("div",Fe,[t("span",Ne,i(y(g)),1),t("span",je,i(c(g)),1)])]))),128)),m.value.length===0?(p(),f("div",Ke,[k(S(w),{icon:"carbon:tool-box"}),t("span",null,i(s.emptyText),1)])):V("",!0)],2)]))}}),eo=E(Oe,[["__scopeId","data-v-b5fd8074"]]),Qe={class:"toast-header"},Re={class:"toast-title"},Xe={class:"toast-content"},He=A({__name:"Toast",setup(n,{expose:v}){const r=b(!1),h=b(""),m=b("success"),y=b("carbon:checkmark"),c=b(3e3),s=(g,T="success",C=3e3)=>{h.value=g,m.value=T,y.value=T==="success"?"carbon:checkmark":"carbon:error",c.value=C,r.value=!0},l=()=>{r.value=!1};return v({show:s}),(g,T)=>(p(),x(N,{to:"body"},[k(j,{name:"modal"},{default:D(()=>[r.value?(p(),f("div",{key:0,class:"toast-overlay",onClick:l},[t("div",{class:I(["toast-modal",`toast--${m.value}`]),onClick:T[0]||(T[0]=M(()=>{},["stop"]))},[t("div",Qe,[k(S(w),{icon:y.value,class:"toast-icon"},null,8,["icon"]),t("span",Re,i(m.value==="success"?"Success":"Error"),1)]),t("div",Xe,[t("span",null,i(h.value),1)]),t("div",{class:"toast-actions"},[t("button",{class:"toast-btn toast-btn--primary",onClick:l}," Confirm ")])],2)])):V("",!0)]),_:1})]))}}),Je=E(He,[["__scopeId","data-v-7dea5631"]]);let $=null;const oo=()=>{if(!$){const n=ae(Je),v=document.createElement("div");document.body.appendChild(v),$=n.mount(v)}return{success:(n,v)=>{$==null||$.show(n,"success",v)},error:(n,v)=>{$==null||$.show(n,"error",v)}}};function to(){const n=ne({show:!1,text:"",type:"success"});return{message:n,showMessage:(r,h="success")=>{console.log(`Showing message: ${r}, Type: ${h}`),n.text=r,n.type=h,n.show=!0;const m=h==="error"?5e3:3e3;console.log(`Message will be automatically hidden after ${m}ms`),setTimeout(()=>{n.show=!1,console.log("Message hidden")},m)}}}export{eo as A,me as M,Ze as T,to as a,oo as u};
